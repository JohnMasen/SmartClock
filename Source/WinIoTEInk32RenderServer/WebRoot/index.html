<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Waveshare Eink 4.2 Inch SPI Device Web Device</title>
    <script src="jquery-3.2.1.min.js">
    </script>
    <script src="imgData.js">
    </script>
    <script>
        function ping() {
            $.ajax({
                url: '/api/Ping',
                type: "GET",
                success: function (result) {
                    alert(JSON.stringify(result));
                },
                

            }
            )
        }

        function getCapability() {
            $.ajax({
                url: '/api/Capability',
                type: "GET",
                success: function (result) {
                    alert(JSON.stringify(result));
                },
            }
            )
        }

        function setbuffer() {
            var x = window.btoa(String.fromCharCode.apply(null, imgData));
            $.ajax({
                url: "/api/SetBuffer?pos=0",
                type: "PUT",
                contentType: "application/json",
                data: JSON.stringify(x),
                success: function (result) {
                    alert("success");
                }
            }
            );
        }

        function render() {
            $.ajax({
                url: '/api/Refresh',
                type: "GET",
                success: function (result) {
                    alert(JSON.stringify(result));
                }
            });
        }
    </script>
</head>
<body>
    <h1>WaveShare Eink 4.2 Inch SPI Device Web Device</h1>
    document not ready yet
    <table>
        <tr>
            <td>ping</td><td><button onclick="ping()">Test</button></td>
        </tr>
        <tr>
            <td>capability</td>
            <td><button onclick="getCapability()">Test</button></td>
        </tr>
        <tr>
            <td>SetBuffer</td>
            <td><button onclick="setbuffer()">Test</button></td>
        </tr>
        <tr>
            <td>Refresh</td>
            <td><button onclick="render()">Test</button></td>
        </tr>
    </table>
    
</body>
</html>